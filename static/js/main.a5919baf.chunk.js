(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,n){e.exports=n(35)},19:function(e,t,n){},20:function(e,t,n){},35:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(7),i=n.n(o),l=(n(19),n(1)),c=n(2),s=n(4),u=n(3),m=n(5),h=(n(20),"LNKEUMRCDZDQI3NFHAFGSBW23FFJL14AI5AVFXNAHY3TR0V2"),d="EKIM4SFIW5H12UNYE5CX5SCC4NDSZLSY1JDLPIEWVK4SPTSK",f=function(e,t,n){return fetch("https://api.foursquare.com/v2/venues/search?client_id=".concat(h,"&client_secret=").concat(d,"&v=").concat(20180323,"&limit=").concat(n,"&near=").concat(e.trim().toLowerCase(),"&radius=100000&query=").concat(t.trim().toLowerCase())).then(function(e){return e.json()}).then(function(e){return e.response.venues})},p=function(e){return fetch("https://api.foursquare.com/v2/venues/".concat(e,"/photos?client_id=").concat(h,"&client_secret=").concat(d,"&v=").concat(20180323)).then(function(e){return e.json()}).then(function(e){return e.response.photos.items})},g=n(13),v=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={area:"Dubai",venue:"School",limit:5},n.handleChange=function(e){var t=e.target;n.setState(Object(g.a)({},t.name,t.value))},n.search=function(){var e=!n.state.area,t=1===n.state.area.length||" "===n.state.area[1],a=!n.state.venue,r=1===n.state.venue.length||" "===n.state.venue[1];e||t||a||r?((e||t)&&(n.areaInput.current.className="invalid-field",setTimeout(function(){n.areaInput.current.className=""},1500)),(a||r)&&(n.venueInput.current.className="invalid-field",setTimeout(function(){n.venueInput.current.className=""},1500))):n.props.onSearch(n.state)},n.areaInput=r.a.createRef(),n.venueInput=r.a.createRef(),n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"search-options",tabIndex:"2","aria-label":"Search Options"},r.a.createElement("h2",null,"Search Options"),r.a.createElement("div",{className:"options"},r.a.createElement("label",{htmlFor:"area"},"Area"),r.a.createElement("input",{ref:this.areaInput,id:"area",type:"text",tabIndex:"3","aria-label":"Search Country, City or Area",name:"area",maxLength:"25",placeholder:"Dubai, New York, Frankfurt",onChange:this.handleChange,defaultValue:"Dubai"}),r.a.createElement("label",{htmlFor:"venue"},"Venue"),r.a.createElement("input",{ref:this.venueInput,id:"venue",type:"text",tabIndex:"4","aria-label":"Search Venue Name",name:"venue",maxLength:"25",placeholder:"School, Restaurant, Coffee",onChange:this.handleChange,defaultValue:"School"}),r.a.createElement("label",{htmlFor:"limit"},"Limit"),r.a.createElement("select",{id:"limit",tabIndex:"5",role:"tablist","aria-label":"Limit Search",name:"limit",defaultValue:"5",onChange:this.handleChange},r.a.createElement("option",{value:"5"},"5"),r.a.createElement("option",{value:"10"},"10"),r.a.createElement("option",{value:"15"},"15"),r.a.createElement("option",{value:"20"},"20"))),r.a.createElement("button",{tabIndex:"6","aria-label":"Search",onClick:this.search},"Search"))}}]),t}(r.a.Component),b=function(e){return r.a.createElement("div",{className:"filter-options",tabIndex:"7","aria-label":"Filter Results"},r.a.createElement("h2",null,"Filter Results"),r.a.createElement("div",{className:"options"},r.a.createElement("input",{id:"filter",type:"text",tabIndex:"8","aria-label":"Filter Venues by Name",maxLength:"25",placeholder:"Venue Name",onChange:function(t){e.onFilter(t.target.value.trim().toLowerCase())}})))},E=function(e){return r.a.createElement("li",{className:"venue"},r.a.createElement("button",{tabIndex:e.tabIndex,onClick:function(){return e.onVenueClick(e.venue.name)}},e.venue.name))},w=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).venueClick=function(e){document.querySelector('[title="'.concat(e,'"]')).click()},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.filteredVenues;return r.a.createElement("div",{className:"venues"},0!==t.length?r.a.createElement("p",{className:"message"},t.length," Result",1===t.length?"":"s"):r.a.createElement("p",{className:"message"},"No Results"),r.a.createElement("ul",{className:"venues-list",tabIndex:"9","aria-label":"List of Venues"},this.props.filteredVenues.map(function(t,n){return r.a.createElement(E,{venue:t,key:t.id,onVenueClick:e.venueClick,tabIndex:n+10})})))}}]),t}(r.a.PureComponent),y=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).search=function(e){n.props.onSearch(e)},n.filter=function(e){n.props.onFilter(e)},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(v,{onSearch:this.search}),r.a.createElement(b,{onFilter:this.filter}),r.a.createElement(w,{filteredVenues:this.props.filteredVenues}))}}]),t}(r.a.Component),C=n(9),k=function(e){return e.spinner?r.a.createElement("div",{className:"loader"},r.a.createElement("img",{src:"spinner.svg",alt:"Spinner"})):r.a.createElement("div",{className:"google-loader"},r.a.createElement("img",{src:"spinner.svg",alt:"Spinner"}))},S=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={selectedVenue:{},activeMarker:{},showingInfoWindow:!1},n.centerMap=function(){var e=new n.props.google.maps.LatLngBounds;return n.props.boundPoints.forEach(function(t){e.extend(t)}),e},n.onMarkerClick=function(e,t){var a=n.props.filteredVenues.filter(function(t){return t.name===e.title}),r="";p(a[0].id).then(function(e){r="".concat(e[0].prefix).concat("150").concat(e[0].suffix),a[0].img=r,n.setState({selectedVenue:a[0],activeMarker:t,showingInfoWindow:!0})}).catch(function(){a[0].img="",n.setState({selectedVenue:a[0],activeMarker:t,showingInfoWindow:!0})})},n.onInfoWindowClose=function(){n.state.showingInfoWindow&&n.setState({selectedVenue:{},activeMarker:{},showingInfoWindow:!1})},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return r.a.createElement(C.Map,{role:"application","aria-label":"map",google:this.props.google,initialCenter:{lat:25.39,lng:-2.52},zoom:2,bounds:this.centerMap(),onClick:this.onInfoWindowClose},this.props.filteredVenues.map(function(t){return r.a.createElement(C.Marker,{key:t.id,title:t.name,name:t.name,position:{lat:t.location.lat,lng:t.location.lng},onClick:e.onMarkerClick,animation:e.state.activeMarker.name===t.name&&e.props.google.maps.Animation.BOUNCE,icon:{url:"marker-icon.png",scaledSize:new e.props.google.maps.Size(50,50)}})}),r.a.createElement(C.InfoWindow,{marker:this.state.activeMarker,visible:this.state.showingInfoWindow,onClose:this.onInfoWindowClose},r.a.createElement("div",{className:"infoWindow-content"},r.a.createElement("h3",null,this.state.selectedVenue.name),this.state.selectedVenue.img?r.a.createElement("img",{src:this.state.selectedVenue.img,alt:"Image of "+this.state.selectedVenue.name}):r.a.createElement("img",{src:"no-image.png",alt:"No images Found"}),r.a.createElement("div",{className:"infoWindow-text"},r.a.createElement("p",null,r.a.createElement("span",null,"Country: "),this.state.selectedVenue.country),r.a.createElement("p",null,r.a.createElement("span",null,"City: "),this.state.selectedVenue.city),r.a.createElement("p",null,r.a.createElement("span",null,"State: "),this.state.selectedVenue.state),r.a.createElement("p",null,r.a.createElement("span",null,"Street: "),this.state.selectedVenue.street)),r.a.createElement("span",null,"Data from Foursquare."))))}}]),t}(r.a.Component),I=Object(C.GoogleApiWrapper)({apiKey:"AIzaSyBppTSlqCQ3KaiqDeYRgdTZqv0Cw_z24lk",LoadingContainer:k})(S),N=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={venues:[],filterQuery:"",filteredVenues:[],boundPoints:[{lat:35,lng:-25},{lat:15,lng:40}]},n.toggleLoader=function(e){document.querySelector("section > .loader").style.display=1===e?"flex":"none"},n.search=function(e){n.toggleLoader(1),f(e.area,e.venue,e.limit).then(function(e){if(!e.length)return alert("No Results"),void n.toggleLoader(0);var t=[],a=[];e.forEach(function(e){t.push({id:e.id,name:e.name,country:e.location.country,city:e.location.city,state:e.location.state,street:e.location.address,location:{lat:e.location.lat,lng:e.location.lng},img:""}),a.push({lat:e.location.lat,lng:e.location.lng})}),n.setState({venues:t,boundPoints:a}),n.filter(n.state.filterQuery),n.toggleLoader(0)}).catch(function(){alert("No Results"),n.toggleLoader(0)})},n.filter=function(e){e?n.setState(function(t){return{filterQuery:e,filteredVenues:t.venues.filter(function(t){return t.name.toLowerCase().includes(e)})}}):n.setState(function(e){return{filterQuery:"",filteredVenues:e.venues}})},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"app"},r.a.createElement("header",null,r.a.createElement("h1",{tabIndex:"1","aria-label":"Neighborhood Map"},"Neighborhood Map")),r.a.createElement("main",null,r.a.createElement("aside",null,r.a.createElement(y,{onSearch:this.search,onFilter:this.filter,filteredVenues:this.state.filteredVenues})),r.a.createElement("section",null,r.a.createElement(k,{spinner:!0}),r.a.createElement(I,{filteredVenues:this.state.filteredVenues,boundPoints:this.state.boundPoints}))))}}]),t}(a.Component),V=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function j(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}var O=function(e){return r.a.createElement("div",{className:"google-error"},r.a.createElement("p",null,"oh no..."),r.a.createElement("h2",null,"There was an error loading the map"),r.a.createElement("p",null,"Sorry...please check back in just a moment."))};window.gm_authFailure=function(){i.a.render(r.a.createElement(O,null),document.getElementById("root"))},i.a.render(r.a.createElement(N,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/Neighborhood-Map-Udacity",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/Neighborhood-Map-Udacity","/service-worker.js");V?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):j(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):j(t,e)})}}()}},[[14,1,2]]]);
//# sourceMappingURL=main.a5919baf.chunk.js.map